import{a as ie,b as s,c as ne,d as le,f as re,g as oe,h as ae,i as me,j as se,k as de,l as ue,n as pe}from"./chunk-PYPUOAOI.js";import{a as te}from"./chunk-OJW6FSEX.js";import{a as ee}from"./chunk-TPVZAPYQ.js";import"./chunk-CBF35FRT.js";import"./chunk-4RSQC63I.js";import{a as Q,e as W,g as X,i as Y,k as Z,l as j}from"./chunk-XZSLKHTU.js";import"./chunk-QLGWID6J.js";import{f as J}from"./chunk-YAPC6UNN.js";import"./chunk-BNAZ6FXL.js";import{i as H}from"./chunk-PD326AGR.js";import{$a as a,Db as D,Eb as F,Ga as V,Kb as $,R as p,Va as d,Wa as u,Xa as b,Ya as f,Za as g,_a as K,ab as r,bb as c,ib as z,kb as C,rb as _,sb as o,xa as m}from"./chunk-BENNHJVS.js";import"./chunk-GH7VMSIE.js";var ce=W({providedIn:"root"},X(()=>({authStore:p(te),globalStore:p(j),memberService:p(ee),toastService:p(Q),router:p(J)})),Y(e=>({createMemberDetails:e.globalStore.withFormSubmission(({userId:i,payload:l})=>e.memberService.createMemberDetails(i,l).pipe(Z({next:t=>{e.toastService.show(`${t.displayName} profile created successfully.`,"success"),e.authStore.setMemberDetails(t),e.router.navigate(["/profile/me"])},error:t=>{e.toastService.show(t.error.detail||"Something went wrong","error")}})))})));function fe(e,n){e&1&&o(0," Image URL is required. ")}function ge(e,n){if(e&1&&d(0,fe,1,0),e&2){let i,l=n.$implicit;u((i=l.key)==="required"?0:-1)}}function Ce(e,n){if(e&1&&(a(0,"span",4),f(1,ge,1,1,null,null,b),D(3,"keyvalue"),r()),e&2){let i,l=C();m(),g(F(3,0,(i=l.memberDetailsForm.get("imageUrl"))==null?null:i.errors))}}function De(e,n){e&1&&o(0," Display name is required. ")}function Fe(e,n){e&1&&o(0," Display name must be at least 2 characters. ")}function ye(e,n){e&1&&o(0," Display name cannot exceed 100 characters. ")}function he(e,n){if(e&1&&d(0,De,1,0)(1,Fe,1,0)(2,ye,1,0),e&2){let i,l=n.$implicit;u((i=l.key)==="required"?0:i==="minlength"?1:i==="maxlength"?2:-1)}}function ve(e,n){if(e&1&&(a(0,"span",4),f(1,he,3,1,null,null,b),D(3,"keyvalue"),r()),e&2){let i,l=C();m(),g(F(3,0,(i=l.memberDetailsForm.get("displayName"))==null?null:i.errors))}}function Se(e,n){e&1&&(a(0,"span",4),o(1," Date of birth is required. "),r())}function xe(e,n){e&1&&(a(0,"span",4),o(1," Gender is required. "),r())}function Me(e,n){e&1&&o(0," City is required. ")}function Te(e,n){e&1&&o(0," City must be at least 2 characters. ")}function Ee(e,n){e&1&&o(0," City cannot exceed 100 characters. ")}function Ne(e,n){if(e&1&&d(0,Me,1,0)(1,Te,1,0)(2,Ee,1,0),e&2){let i,l=n.$implicit;u((i=l.key)==="required"?0:i==="minlength"?1:i==="maxlength"?2:-1)}}function Be(e,n){if(e&1&&(a(0,"span",4),f(1,Ne,3,1,null,null,b),D(3,"keyvalue"),r()),e&2){let i,l=C();m(),g(F(3,0,(i=l.memberDetailsForm.get("city"))==null?null:i.errors))}}function we(e,n){e&1&&o(0," Country is required. ")}function Ue(e,n){e&1&&o(0," Country must be at least 2 characters. ")}function qe(e,n){e&1&&o(0," Country cannot exceed 100 characters. ")}function ke(e,n){if(e&1&&d(0,we,1,0)(1,Ue,1,0)(2,qe,1,0),e&2){let i,l=n.$implicit;u((i=l.key)==="required"?0:i==="minlength"?1:i==="maxlength"?2:-1)}}function Pe(e,n){if(e&1&&(a(0,"span",4),f(1,ke,3,1,null,null,b),D(3,"keyvalue"),r()),e&2){let i,l=C();m(),g(F(3,0,(i=l.memberDetailsForm.get("country"))==null?null:i.errors))}}function Le(e,n){e&1&&o(0," Description is required. ")}function Oe(e,n){e&1&&o(0," Description must be at least 10 characters. ")}function Ie(e,n){e&1&&o(0," Description cannot exceed 500 characters. ")}function Ge(e,n){if(e&1&&d(0,Le,1,0)(1,Oe,1,0)(2,Ie,1,0),e&2){let i,l=n.$implicit;u((i=l.key)==="required"?0:i==="minlength"?1:i==="maxlength"?2:-1)}}function Ae(e,n){if(e&1&&(a(0,"span",4),f(1,Ge,3,1,null,null,b),D(3,"keyvalue"),r()),e&2){let i,l=C();m(),g(F(3,0,(i=l.memberDetailsForm.get("description"))==null?null:i.errors))}}function Re(e,n){e&1&&c(0,"span",18)}function Ve(e,n){e&1&&o(0," Create Profile ")}var _e=(()=>{class e{profileStore=p(ce);globalStore=p(j);formBuilder=p(ue);currentUser=$(()=>this.profileStore.authStore.currentUser());memberDetails=$(()=>this.profileStore.authStore.currentUser()?.memberDetails);isLoading=$(()=>this.globalStore.isSubmitting());memberDetailsForm=this.formBuilder.group({dateOfBirth:["",[s.required]],imageUrl:["",[s.required]],displayName:[this.currentUser()?.displayName,[s.required,s.minLength(2),s.maxLength(100)]],gender:["",[s.required]],description:["",[s.required,s.minLength(10),s.maxLength(500)]],city:["",[s.required,s.minLength(2),s.maxLength(100)]],country:["",[s.required,s.minLength(2),s.maxLength(100)]]});onCreateMemberDetailsSubmit(){if(this.memberDetailsForm.invalid||!this.currentUser()){this.memberDetailsForm.markAllAsTouched();return}let i=this.memberDetailsForm.getRawValue(),l={dateOfBirth:i.dateOfBirth,imageUrl:i.imageUrl,displayName:i.displayName,gender:i.gender,description:i.description,city:i.city,country:i.country};this.profileStore.createMemberDetails({data:{userId:this.currentUser().userId,payload:l}})}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=V({type:e,selectors:[["app-member-details-form"]],decls:57,vars:38,consts:[[1,"flex","flex-col","gap-6",3,"ngSubmit","formGroup"],[1,"label"],[1,"label-text","font-semibold"],["type","text","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"input","input-bordered","w-full"],[1,"text-error","text-xs","mt-1"],["type","text","formControlName","displayName","placeholder","Enter your display name",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","date","formControlName","dateOfBirth",1,"input","input-bordered","w-full"],["formControlName","gender",1,"select","select-bordered","w-full"],["value","","disabled","","selected",""],["value","male"],["value","female"],["value","other"],["type","text","formControlName","city","placeholder","Enter your city",1,"input","input-bordered","w-full"],["type","text","formControlName","country","placeholder","Enter your country",1,"input","input-bordered","w-full"],["formControlName","description","placeholder","Tell us about yourself...",1,"textarea","textarea-bordered","w-full","h-32"],[1,"card-actions","justify-end","mt-4"],["type","submit",1,"btn","btn-primary","w-full","md:w-auto",3,"disabled"],[1,"loading","loading-spinner","loading-xs"]],template:function(l,t){if(l&1&&(a(0,"form",0),z("ngSubmit",function(){return t.onCreateMemberDetailsSubmit()}),a(1,"div")(2,"label",1)(3,"span",2),o(4,"Profile Picture URL"),r()(),c(5,"input",3),d(6,Ce,4,2,"span",4),r(),a(7,"div")(8,"label",1)(9,"span",2),o(10,"Display Name"),r()(),c(11,"input",5),d(12,ve,4,2,"span",4),r(),a(13,"div",6)(14,"div")(15,"label",1)(16,"span",2),o(17,"Date of Birth"),r()(),c(18,"input",7),d(19,Se,2,0,"span",4),r(),a(20,"div")(21,"label",1)(22,"span",2),o(23,"Gender"),r()(),a(24,"select",8)(25,"option",9),o(26,"Select gender"),r(),a(27,"option",10),o(28,"Male"),r(),a(29,"option",11),o(30,"Female"),r(),a(31,"option",12),o(32,"Other"),r()(),d(33,xe,2,0,"span",4),r()(),a(34,"div",6)(35,"div")(36,"label",1)(37,"span",2),o(38,"City"),r()(),c(39,"input",13),d(40,Be,4,2,"span",4),r(),a(41,"div")(42,"label",1)(43,"span",2),o(44,"Country"),r()(),c(45,"input",14),d(46,Pe,4,2,"span",4),r()(),a(47,"div")(48,"label",1)(49,"span",2),o(50,"About Me"),r()(),c(51,"textarea",15),d(52,Ae,4,2,"span",4),r(),a(53,"div",16)(54,"button",17),d(55,Re,1,0,"span",18)(56,Ve,1,0),r()()()),l&2){let y,h,v,S,x,M,T,E,N,B,w,U,q,k,P,L,O,I,G,A,R;K("formGroup",t.memberDetailsForm),m(5),_("input-error",((y=t.memberDetailsForm.get("imageUrl"))==null?null:y.invalid)&&((y=t.memberDetailsForm.get("imageUrl"))==null?null:y.touched))("input-success",((h=t.memberDetailsForm.get("imageUrl"))==null?null:h.valid)&&((h=t.memberDetailsForm.get("imageUrl"))==null?null:h.touched)),m(),u((v=t.memberDetailsForm.get("imageUrl"))!=null&&v.invalid&&((v=t.memberDetailsForm.get("imageUrl"))!=null&&v.touched)?6:-1),m(5),_("input-error",((S=t.memberDetailsForm.get("displayName"))==null?null:S.invalid)&&((S=t.memberDetailsForm.get("displayName"))==null?null:S.touched))("input-success",((x=t.memberDetailsForm.get("displayName"))==null?null:x.valid)&&((x=t.memberDetailsForm.get("displayName"))==null?null:x.touched)),m(),u((M=t.memberDetailsForm.get("displayName"))!=null&&M.invalid&&((M=t.memberDetailsForm.get("displayName"))!=null&&M.touched)?12:-1),m(6),_("input-error",((T=t.memberDetailsForm.get("dateOfBirth"))==null?null:T.invalid)&&((T=t.memberDetailsForm.get("dateOfBirth"))==null?null:T.touched))("input-success",((E=t.memberDetailsForm.get("dateOfBirth"))==null?null:E.valid)&&((E=t.memberDetailsForm.get("dateOfBirth"))==null?null:E.touched)),m(),u((N=t.memberDetailsForm.get("dateOfBirth"))!=null&&N.invalid&&((N=t.memberDetailsForm.get("dateOfBirth"))!=null&&N.touched)?19:-1),m(5),_("input-error",((B=t.memberDetailsForm.get("gender"))==null?null:B.invalid)&&((B=t.memberDetailsForm.get("gender"))==null?null:B.touched))("input-success",((w=t.memberDetailsForm.get("gender"))==null?null:w.valid)&&((w=t.memberDetailsForm.get("gender"))==null?null:w.touched)),m(9),u((U=t.memberDetailsForm.get("gender"))!=null&&U.invalid&&((U=t.memberDetailsForm.get("gender"))!=null&&U.touched)?33:-1),m(6),_("input-error",((q=t.memberDetailsForm.get("city"))==null?null:q.invalid)&&((q=t.memberDetailsForm.get("city"))==null?null:q.touched))("input-success",((k=t.memberDetailsForm.get("city"))==null?null:k.valid)&&((k=t.memberDetailsForm.get("city"))==null?null:k.touched)),m(),u((P=t.memberDetailsForm.get("city"))!=null&&P.invalid&&((P=t.memberDetailsForm.get("city"))!=null&&P.touched)?40:-1),m(5),_("input-error",((L=t.memberDetailsForm.get("country"))==null?null:L.invalid)&&((L=t.memberDetailsForm.get("country"))==null?null:L.touched))("input-success",((O=t.memberDetailsForm.get("country"))==null?null:O.valid)&&((O=t.memberDetailsForm.get("country"))==null?null:O.touched)),m(),u((I=t.memberDetailsForm.get("country"))!=null&&I.invalid&&((I=t.memberDetailsForm.get("country"))!=null&&I.touched)?46:-1),m(5),_("input-error",((G=t.memberDetailsForm.get("description"))==null?null:G.invalid)&&((G=t.memberDetailsForm.get("description"))==null?null:G.touched))("input-success",((A=t.memberDetailsForm.get("description"))==null?null:A.valid)&&((A=t.memberDetailsForm.get("description"))==null?null:A.touched)),m(),u((R=t.memberDetailsForm.get("description"))!=null&&R.invalid&&((R=t.memberDetailsForm.get("description"))!=null&&R.touched)?52:-1),m(2),K("disabled",t.memberDetailsForm.invalid||t.isLoading()),m(),u(t.isLoading()?55:56)}},dependencies:[pe,re,se,de,ie,me,ne,le,oe,ae,H],encapsulation:2})}return e})();var at=(()=>{class e{static \u0275fac=function(l){return new(l||e)};static \u0275cmp=V({type:e,selectors:[["app-member-details"]],decls:9,vars:0,consts:[[1,"min-h-screen","bg-base-200","py-8"],[1,"container","mx-auto","px-4","max-w-2xl"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body"],[1,"card-title","text-2xl","mb-4"],[1,"text-base-content/70","mb-6"]],template:function(l,t){l&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),o(5,"Set up your Profile"),r(),a(6,"p",5),o(7," Complete your profile to start connecting with others "),r(),c(8,"app-member-details-form"),r()()()())},dependencies:[_e],encapsulation:2})}return e})();export{at as MemberDetailsComponent};
//# sourceMappingURL=chunk-WAL6TKVT.js.map
