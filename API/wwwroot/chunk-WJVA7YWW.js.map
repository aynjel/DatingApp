{
  "version": 3,
  "sources": ["src/app/modules/people/store/people.store.ts"],
  "sourcesContent": ["import { HttpErrorResponse } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { tapResponse } from '@ngrx/operators';\nimport {\n  patchState,\n  signalStore,\n  withMethods,\n  withProps,\n  withState,\n} from '@ngrx/signals';\nimport {\n  PaginationHeaderResponse,\n  PaginationParams,\n} from '../../../shared/models/common-models';\nimport { Member } from '../../../shared/models/member.model';\nimport { MemberService } from '../../../shared/services/member.service';\nimport { ToastService } from '../../../shared/services/toast.service';\nimport { GlobalStore } from '../../../shared/store/global.store';\n\ntype PeopleStoreType = {\n  members: Member[];\n  pagination: PaginationHeaderResponse;\n  searchTerm: string;\n};\n\nconst initialState: PeopleStoreType = {\n  members: [],\n  pagination: {\n    currentPage: 1,\n    itemsPerPage: 10,\n    totalItems: 0,\n    totalPages: 0,\n  },\n  searchTerm: '',\n};\n\nexport const PeopleStore = signalStore(\n  { providedIn: 'root' },\n  withState(initialState),\n  withProps(() => ({\n    globalStore: inject(GlobalStore),\n    memberService: inject(MemberService),\n    toastService: inject(ToastService),\n  })),\n  withMethods((store) => {\n    const getMembers = store.globalStore.withApiState<\n      PaginationParams & { searchTerm?: string },\n      { data: Member[]; pagination: PaginationHeaderResponse }\n    >(({ pageNumber = 1, pageSize = 10, searchTerm = '' }) =>\n      store.memberService.getMembers({ pageNumber, pageSize, searchTerm }).pipe(\n        tapResponse({\n          next: (response) => {\n            patchState(store, {\n              members: response.data,\n              pagination: response.pagination,\n              searchTerm: searchTerm || '',\n            });\n          },\n          error: (error: HttpErrorResponse) => {\n            store.toastService.show(\n              error.error.message || 'Something went wrong',\n              'error'\n            );\n          },\n        })\n      )\n    );\n\n    return {\n      getMembers,\n    };\n  })\n);\n"],
  "mappings": "yKAyBA,IAAMA,EAAgC,CACpCC,QAAS,CAAA,EACTC,WAAY,CACVC,YAAa,EACbC,aAAc,GACdC,WAAY,EACZC,WAAY,GAEdC,WAAY,IAGDC,EAAcC,EACzB,CAAEC,WAAY,MAAM,EACpBC,EAAUX,CAAY,EACtBY,EAAU,KAAO,CACfC,YAAaC,EAAOC,CAAW,EAC/BC,cAAeF,EAAOG,CAAa,EACnCC,aAAcJ,EAAOK,CAAY,GACjC,EACFC,EAAaC,IAwBJ,CACLC,WAxBiBD,EAAMR,YAAYU,aAGnC,CAAC,CAAEC,WAAAA,EAAa,EAAGC,SAAAA,EAAW,GAAIlB,WAAAA,EAAa,EAAE,IACjDc,EAAML,cAAcM,WAAW,CAAEE,WAAAA,EAAYC,SAAAA,EAAUlB,WAAAA,CAAU,CAAE,EAAEmB,KACnEC,EAAY,CACVC,KAAOC,GAAY,CACjBC,EAAWT,EAAO,CAChBpB,QAAS4B,EAASE,KAClB7B,WAAY2B,EAAS3B,WACrBK,WAAYA,GAAc,GAC3B,CACH,EACAyB,MAAQA,GAA4B,CAClCX,EAAMH,aAAae,KACjBD,EAAMA,MAAME,SAAW,uBACvB,OAAO,CAEX,EACD,CAAC,CACH,GAMJ,CAAC",
  "names": ["initialState", "members", "pagination", "currentPage", "itemsPerPage", "totalItems", "totalPages", "searchTerm", "PeopleStore", "signalStore", "providedIn", "withState", "withProps", "globalStore", "inject", "GlobalStore", "memberService", "MemberService", "toastService", "ToastService", "withMethods", "store", "getMembers", "withApiState", "pageNumber", "pageSize", "pipe", "tapResponse", "next", "response", "patchState", "data", "error", "show", "message"]
}
