import{$ as j,A as v,G as R,J as b,Jb as y,Kb as G,Lb as K,M as D,R as l,b as O,ba as p,c as x,fa as g,g as W,ga as I,i as U,m as z,v as q,x as L}from"./chunk-BENNHJVS.js";import{a as s,b as d}from"./chunk-GH7VMSIE.js";var ae=(()=>{class t{toasts=I([]);counter=0;show(n,o="info",i=3e3){let r=this.counter++,c={id:r,message:n,type:o,duration:i};this.toasts.set([...this.toasts(),c]),i>0&&setTimeout(()=>this.remove(r),i)}remove(n){this.toasts.set(this.toasts().filter(o=>o.id!==n))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $=Symbol("DEEP_SIGNAL");function B(t){return new Proxy(t,{has(e,n){return!!this.get(e,n,void 0)},get(e,n){let o=y(e);return!Q(o)||!(n in o)?(g(e[n])&&e[n][$]&&delete e[n],e[n]):(g(e[n])||(Object.defineProperty(e,n,{value:G(()=>e()[n]),configurable:!0}),e[n][$]=!0),B(e[n]))}})}var J=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Q(t){if(t===null||typeof t!="object"||X(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(J.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function X(t){return typeof t?.[Symbol.iterator]=="function"}var k=new WeakMap,a=Symbol("STATE_SOURCE");function E(t,...e){let n=y(()=>T(t)),o=e.reduce((c,f)=>s(s({},c),typeof f=="function"?f(c):f),n),i=t[a],r=Reflect.ownKeys(t[a]);for(let c of Reflect.ownKeys(o))if(r.includes(c)){let f=c;n[f]!==o[f]&&i[f].set(o[f])}Z(t)}function T(t){let e=t[a];return Reflect.ownKeys(t[a]).reduce((n,o)=>{let i=e[o]();return d(s({},n),{[o]:i})},{})}function ge(t,e,n){let i=(n?.injector??l(j)).get(p);ee(t,e),e(T(t));let r=()=>te(t,e);return i.onDestroy(r),{destroy:r}}function C(t){return k.get(t[a])||[]}function Z(t){let e=C(t);for(let n of e){let o=y(()=>T(t));n(o)}}function ee(t,e){let n=C(t);k.set(t[a],[...n,e])}function te(t,e){let n=C(t);k.set(t[a],n.filter(o=>o!==e))}function H(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class r{constructor(){let f=o.reduce((M,Y)=>Y(M),ne()),{stateSignals:h,props:m,methods:S,hooks:u}=f,w=s(s(s({},h),m),S);this[a]=f[a];for(let M of Reflect.ownKeys(w))this[M]=w[M];let{onInit:P,onDestroy:F}=u;P&&P(),F&&l(p).onDestroy(F)}static \u0275fac=function(h){return new(h||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function ne(){return{[a]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function ye(...t){let e=typeof t[0]=="function"?t:t.slice(1);return n=>e.reduce((o,i)=>i(o),n)}function he(t){return e=>{let n=t(s(s(s({[a]:e[a]},e.stateSignals),e.props),e.methods));return d(s({},e),{props:s(s({},e.props),n)})}}function me(t){return e=>{let n=s(s(s({[a]:e[a]},e.stateSignals),e.props),e.methods),o=typeof t=="function"?t(n):t,i=(r,c)=>c?()=>{r&&r(),c(n)}:r;return d(s({},e),{hooks:{onInit:i(e.hooks.onInit,o.onInit),onDestroy:i(e.hooks.onDestroy,o.onDestroy)}})}}function N(t){return e=>{let n=t(s(s(s({[a]:e[a]},e.stateSignals),e.props),e.methods));return d(s({},e),{methods:s(s({},e.methods),n)})}}function V(t){return e=>{let n=typeof t=="function"?t():t,o=Reflect.ownKeys(n),i=e[a],r={};for(let c of o)i[c]=I(n[c]),r[c]=B(i[c]);return d(s({},e),{stateSignals:s(s({},e.stateSignals),r)})}}function xe(t,e,n){let o=typeof t=="function"?{next:t,error:e,complete:n}:t;return i=>i.pipe(b({next:o.next,complete:o.complete}),q(r=>(o.error(r),U)),o.finalize?v(o.finalize):r=>r)}function A(t,e){let n=e?.injector??l(j),o=new W,i=t(o).subscribe();n.get(p).onDestroy(()=>i.unsubscribe());let r=(c,f)=>{if(oe(c))return o.next(c),{destroy:O};let h=re(),m=f?.injector??h??n;if(g(c)){let u=K(()=>{let w=c();y(()=>o.next(w))},{injector:m});return i.add({unsubscribe:()=>u.destroy()}),u}let S=c.subscribe(u=>o.next(u));return i.add(S),m!==n&&m.get(p).onDestroy(()=>S.unsubscribe()),{destroy:()=>S.unsubscribe()}};return r.destroy=i.unsubscribe.bind(i),r}function oe(t){return!g(t)&&!z(t)}function re(){try{return l(j)}catch{return}}var ie={isSubmitting:!1},Fe=H({providedIn:"root"},V(ie),N(t=>({withFormSubmission(e){return A(x(b(()=>E(t,{isSubmitting:!0})),L(300),R(n=>e(n.data).pipe(b({next:o=>{n.onSuccess?.(o)},error:o=>{n.onError?.(o)}}),v(()=>{E(t,{isSubmitting:!1})})))))},withApiState(e){return A(x(R(e)))}})));export{ae as a,E as b,T as c,ge as d,H as e,ye as f,he as g,me as h,N as i,V as j,xe as k,Fe as l};
//# sourceMappingURL=chunk-XZSLKHTU.js.map
