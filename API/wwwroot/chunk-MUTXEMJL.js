import{a as R,b as _,c as A,d as G,f as O,g as V,h as j,l as $,n as K}from"./chunk-PYPUOAOI.js";import{a as S}from"./chunk-OJW6FSEX.js";import"./chunk-TPVZAPYQ.js";import"./chunk-CBF35FRT.js";import"./chunk-4RSQC63I.js";import{l as M}from"./chunk-XZSLKHTU.js";import"./chunk-QLGWID6J.js";import{f as P,g as q}from"./chunk-YAPC6UNN.js";import"./chunk-BNAZ6FXL.js";import{i as I}from"./chunk-PD326AGR.js";import{$a as o,Db as k,Eb as E,Ga as h,Kb as N,Lb as B,R as p,Va as d,Wa as s,Xa as b,Ya as x,Za as L,_a as g,ab as l,bb as u,ib as D,kb as w,rb as T,sb as r,xa as m}from"./chunk-BENNHJVS.js";import"./chunk-GH7VMSIE.js";function H(e,a){e&1&&r(0," Email is required. ")}function J(e,a){e&1&&r(0," Invalid email format. ")}function Q(e,a){if(e&1&&d(0,H,1,0)(1,J,1,0),e&2){let i,n=a.$implicit;s((i=n.key)==="required"?0:i==="email"?1:-1)}}function U(e,a){if(e&1&&(o(0,"span",3),x(1,Q,2,1,null,null,b),k(3,"keyvalue"),l()),e&2){let i,n=w();m(),L(E(3,0,(i=n.loginForm.get("email"))==null?null:i.errors))}}function X(e,a){e&1&&r(0," Password is required. ")}function Y(e,a){e&1&&r(0," Password must be at least 6 characters. ")}function Z(e,a){if(e&1&&d(0,X,1,0)(1,Y,1,0),e&2){let i,n=a.$implicit;s((i=n.key)==="required"?0:i==="minlength"?1:-1)}}function ee(e,a){if(e&1&&(o(0,"span",3),x(1,Z,2,1,null,null,b),k(3,"keyvalue"),l()),e&2){let i,n=w();m(),L(E(3,0,(i=n.loginForm.get("password"))==null?null:i.errors))}}function te(e,a){e&1&&u(0,"span",6)}function ie(e,a){e&1&&r(0," Sign In ")}var W=(()=>{class e{globalStore=p(M);authStore=p(S);formBuilder=p($);isLoading=N(()=>this.globalStore.isSubmitting());loginForm=this.formBuilder.group({email:["",[_.required,_.email]],password:["",[_.required,_.minLength(6)]]});onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let i=this.loginForm.getRawValue(),n={email:i.email,password:i.password};this.authStore.signIn({data:n,onSuccess:()=>{this.loginForm.reset()}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-login-form"]],decls:11,vars:15,consts:[[3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-3"],["type","email","formControlName","email","placeholder","Email",1,"input","input-bordered","w-full",3,"readOnly"],[1,"text-error","text-xs"],["type","password","formControlName","password","placeholder","Password",1,"input","input-bordered","w-full",3,"readOnly"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled"],[1,"loading","loading-spinner","loading-xs"]],template:function(n,t){if(n&1&&(o(0,"form",0),D("ngSubmit",function(){return t.onSubmit()}),o(1,"div",1)(2,"div"),u(3,"input",2),d(4,U,4,2,"span",3),l(),o(5,"div"),u(6,"input",4),d(7,ee,4,2,"span",3),l(),o(8,"button",5),d(9,te,1,0,"span",6)(10,ie,1,0),l()()()),n&2){let c,f,C,F,v,y;g("formGroup",t.loginForm),m(3),T("input-error",((c=t.loginForm.get("email"))==null?null:c.invalid)&&((c=t.loginForm.get("email"))==null?null:c.touched))("input-success",((f=t.loginForm.get("email"))==null?null:f.valid)&&((f=t.loginForm.get("email"))==null?null:f.touched)),g("readOnly",t.isLoading()),m(),s((C=t.loginForm.get("email"))!=null&&C.invalid&&((C=t.loginForm.get("email"))!=null&&C.touched)?4:-1),m(2),T("input-error",((F=t.loginForm.get("password"))==null?null:F.invalid)&&((F=t.loginForm.get("password"))==null?null:F.touched))("input-success",((v=t.loginForm.get("password"))==null?null:v.valid)&&((v=t.loginForm.get("password"))==null?null:v.touched)),g("readOnly",t.isLoading()),m(),s((y=t.loginForm.get("password"))!=null&&y.invalid&&((y=t.loginForm.get("password"))!=null&&y.touched)?7:-1),m(),g("disabled",t.isLoading()),m(),s(t.isLoading()?9:10)}},dependencies:[K,O,R,A,G,V,j,I],encapsulation:2})}return e})();var fe=(()=>{class e{authStore=p(S);router=p(P);constructor(){B(()=>{this.authStore.isLoggedIn()&&this.router.navigate(["/home"])})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-login"]],decls:18,vars:0,consts:[["loginFormRef",""],[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-base-200","via-base-100","to-base-200","py-12","px-4"],[1,"card","w-full","max-w-md","shadow-2xl","bg-base-100"],[1,"card-body"],[1,"card-title","text-3xl","justify-center","mb-2"],[1,"text-center","text-base-content/70","mb-6"],[1,"divider"],[1,"text-center","space-y-2"],["routerLink","/auth/forgot-password",1,"link","link-primary","text-sm"],[1,"text-sm","text-base-content/70"],["routerLink","/auth/register",1,"link","link-primary","ml-1"]],template:function(n,t){n&1&&(o(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),r(4,"Sign In"),l(),o(5,"p",5),r(6," Welcome back! Please sign in to your account. "),l(),u(7,"app-login-form",null,0),o(9,"div",6),r(10,"OR"),l(),o(11,"div",7)(12,"a",8),r(13," Forgot your password? "),l(),o(14,"p",9),r(15," Don't have an account? "),o(16,"a",10),r(17," Sign up "),l()()()()()())},dependencies:[W,q],encapsulation:2})}return e})();export{fe as LoginComponent};
//# sourceMappingURL=chunk-MUTXEMJL.js.map
