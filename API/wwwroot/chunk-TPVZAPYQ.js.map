{
  "version": 3,
  "sources": ["src/app/shared/services/member.service.ts"],
  "sourcesContent": ["import { HttpClient, HttpParams, HttpResponse } from '@angular/common/http';\r\nimport { inject, Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport { CreateMemberDetailsRequest } from '../../modules/profile/models/create-member.models';\r\nimport {\r\n  PaginationHeaderResponse,\r\n  PaginationParams,\r\n} from '../models/common-models';\r\nimport { Member, Photo } from '../models/member.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MemberService {\r\n  private http = inject(HttpClient);\r\n  private readonly baseUrl = environment.apiUrl + '/Members';\r\n\r\n  public getMembers(\r\n    params?: PaginationParams & { searchTerm?: string }\r\n  ): Observable<{ data: Member[]; pagination: PaginationHeaderResponse }> {\r\n    let queryParams = new HttpParams();\r\n    if (params?.pageNumber) {\r\n      queryParams = queryParams.set('pageNumber', params.pageNumber);\r\n    }\r\n    if (params?.pageSize) {\r\n      queryParams = queryParams.set('pageSize', params.pageSize);\r\n    }\r\n    if (params?.searchTerm) {\r\n      queryParams = queryParams.set('searchTerm', params.searchTerm);\r\n    }\r\n    return this.http\r\n      .get<Member[]>(this.baseUrl, { params: queryParams, observe: 'response' })\r\n      .pipe(\r\n        map((response: HttpResponse<Member[]>) => {\r\n          const paginationHeader = response.headers.get('Pagination');\r\n          let pagination: PaginationHeaderResponse = {\r\n            currentPage: 1,\r\n            itemsPerPage: 10,\r\n            totalItems: 0,\r\n            totalPages: 0,\r\n          };\r\n\r\n          if (paginationHeader) {\r\n            try {\r\n              pagination = JSON.parse(paginationHeader);\r\n            } catch (error) {\r\n              console.error('Error parsing pagination header:', error);\r\n            }\r\n          }\r\n\r\n          return {\r\n            data: response.body || [],\r\n            pagination,\r\n          };\r\n        })\r\n      );\r\n  }\r\n\r\n  public getMemberById(id: string): Observable<Member> {\r\n    return this.http.get<Member>(`${this.baseUrl}/${id}`);\r\n  }\r\n\r\n  public getPhotosByMemberId(memberId: string): Observable<Photo[]> {\r\n    return this.http.get<Photo[]>(`${this.baseUrl}/${memberId}/photos`);\r\n  }\r\n\r\n  public createMemberDetails(\r\n    userId: string,\r\n    payload: CreateMemberDetailsRequest\r\n  ): Observable<Member> {\r\n    return this.http.post<Member>(`${this.baseUrl}/${userId}`, payload);\r\n  }\r\n}\r\n"],
  "mappings": "6IAcA,IAAaA,GAAa,IAAA,CAApB,MAAOA,CAAa,CAChBC,KAAOC,EAAOC,CAAU,EACfC,QAAUC,EAAYC,OAAS,WAEzCC,WACLC,EAAmD,CAEnD,IAAIC,EAAc,IAAIC,EACtB,OAAIF,GAAQG,aACVF,EAAcA,EAAYG,IAAI,aAAcJ,EAAOG,UAAU,GAE3DH,GAAQK,WACVJ,EAAcA,EAAYG,IAAI,WAAYJ,EAAOK,QAAQ,GAEvDL,GAAQM,aACVL,EAAcA,EAAYG,IAAI,aAAcJ,EAAOM,UAAU,GAExD,KAAKb,KACTc,IAAc,KAAKX,QAAS,CAAEI,OAAQC,EAAaO,QAAS,UAAU,CAAE,EACxEC,KACCC,EAAKC,GAAoC,CACvC,IAAMC,EAAmBD,EAASE,QAAQN,IAAI,YAAY,EACtDO,EAAuC,CACzCC,YAAa,EACbC,aAAc,GACdC,WAAY,EACZC,WAAY,GAGd,GAAIN,EACF,GAAI,CACFE,EAAaK,KAAKC,MAAMR,CAAgB,CAC1C,OAASS,EAAO,CACdC,QAAQD,MAAM,mCAAoCA,CAAK,CACzD,CAGF,MAAO,CACLE,KAAMZ,EAASa,MAAQ,CAAA,EACvBV,WAAAA,EAEJ,CAAC,CAAC,CAER,CAEOW,cAAcC,EAAU,CAC7B,OAAO,KAAKjC,KAAKc,IAAY,GAAG,KAAKX,OAAO,IAAI8B,CAAE,EAAE,CACtD,CAEOC,oBAAoBC,EAAgB,CACzC,OAAO,KAAKnC,KAAKc,IAAa,GAAG,KAAKX,OAAO,IAAIgC,CAAQ,SAAS,CACpE,CAEOC,oBACLC,EACAC,EAAmC,CAEnC,OAAO,KAAKtC,KAAKuC,KAAa,GAAG,KAAKpC,OAAO,IAAIkC,CAAM,GAAIC,CAAO,CACpE,4CA1DWvC,EAAa,6BAAbA,EAAayC,QAAbzC,EAAa0C,UAAAC,WAFZ,MAAM,CAAA,SAEP3C,CAAa,GAAA",
  "names": ["MemberService", "http", "inject", "HttpClient", "baseUrl", "environment", "apiUrl", "getMembers", "params", "queryParams", "HttpParams", "pageNumber", "set", "pageSize", "searchTerm", "get", "observe", "pipe", "map", "response", "paginationHeader", "headers", "pagination", "currentPage", "itemsPerPage", "totalItems", "totalPages", "JSON", "parse", "error", "console", "data", "body", "getMemberById", "id", "getPhotosByMemberId", "memberId", "createMemberDetails", "userId", "payload", "post", "factory", "\u0275fac", "providedIn"]
}
