<div class="card border">
  <div class="card-body">
    <!-- Filter Controls -->
    <div class="flex gap-2 justify-between items-center">
      <button
        (click)="toggleFilters()"
        class="btn btn-outline gap-2"
        [class.btn-primary]="showFilters() || hasActiveFilters()"
      >
        <lucide-icon [name]="filterIcon" class="size-4" />
        Filters @if (hasActiveFilters()) {
        <span class="badge badge-primary badge-sm">{{
          getActiveFilterCount()
        }}</span>
        }
      </button>
    </div>

    <!-- Advanced Filters -->
    @if (showFilters()) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Gender Filter -->
      <div>
        <label class="label">
          <span class="label-text font-medium">Gender</span>
        </label>
        <select
          class="select select-bordered w-full"
          [value]="genderFilter()"
          (change)="genderFilter.set($any($event.target).value)"
        >
          <option value="">All</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <!-- Age Range -->
      <div>
        <label class="label">
          <span class="label-text font-medium">Min Age</span>
        </label>
        <input
          type="number"
          class="input input-bordered w-full"
          [value]="minAgeFilter()"
          (change)="onMinAgeChange($event)"
          placeholder="18"
          min="18"
          max="100"
        />
      </div>

      <div>
        <label class="label">
          <span class="label-text font-medium">Max Age</span>
        </label>
        <input
          type="number"
          class="input input-bordered w-full"
          [value]="maxAgeFilter()"
          (change)="onMaxAgeChange($event)"
          placeholder="100"
          min="18"
          max="100"
        />
      </div>

      <!-- Order By Filters -->
      <div>
        <label class="label">
          <span class="label-text font-medium">Order By</span>
        </label>
        <select
          class="select select-bordered w-full"
          [value]="orderBy()"
          (change)="orderBy.set($any($event.target).value)"
        >
          <option value="lastActive">Last Active</option>
          <option value="created">Created</option>
        </select>
      </div>

      <!-- Action Buttons -->
      <div class="flex items-end gap-2">
        @if (hasActiveFilters()) {
        <button (click)="onClearFilters()" class="btn btn-ghost btn-sm flex-1">
          Clear All
        </button>
        }
        <button
          (click)="onSubmitFilters()"
          class="btn btn-primary btn-sm flex-1"
        >
          Apply Filters
        </button>
      </div>
    </div>
    }

    <!-- Pagination Controls -->
    <app-pagination
      [pageNumber]="pagination().currentPage"
      [pageSize]="pagination().itemsPerPage"
      [totalCount]="pagination().totalItems"
      [totalPages]="pagination().totalPages"
      (pageChanged)="onPageChange($event)"
    />
  </div>
</div>
